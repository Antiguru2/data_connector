# Data Connector

## Описание приложения

Data Connector - это Django-приложение, которое предоставляет универсальный механизм для сериализации и передачи данных между различными моделями Django. Приложение позволяет:

- Создавать гибкие сериализаторы для любых моделей Django
- Настраивать обработку полей моделей через систему обработчиков
- Передавать данные между удаленными сайтами

## Принцип работы

### Основные компоненты:

1. **DataConnector** - центральный класс для настройки сериализации:
   - Привязывается к конкретной модели Django через ContentType
   - Управляет правами доступа (просмотр/редактирование/удаление/создание)
   - Автоматически создает поля сериализатора на основе полей модели

2. **SerializerField** - представляет поле сериализатора:
   - Поддерживает все типы полей Django
   - Имеет систему обработчиков для преобразования данных
   - Позволяет настраивать альтернативные ключи для API

3. **FieldHandler** - система обработки полей:
   - Обрабатывает различные типы полей (ForeignKey, ManyToMany и др.)
   - Преобразует данные при сериализации/десериализации
   - Поддерживает вложенную сериализацию

4. **Transmitter** - система передачи данных:
   - Поддерживает отправку и получение данных
   - Имеет режимы тестирования и обычной работы
   - Ведет логирование операций

### API Endpoints:

- `/super-api/<natural_key>/` - основной endpoint для работы с данными
- Поддерживает GET, POST, PATCH методы
- Позволяет указывать конкретный сериализатор и ID объекта

## Стратегия развития

1. **Работа с формами**:
   - Добавить обработку данных в виде списка словарей с вложенностью
   В данный момент программа обрабатывает данные как rest_framework:
   {
      "key":"value"
   }
   Для форм будет:
   [
      {
         "name":"name_1",
         "value":"value_1",
         ...
      },
      {
         "name":"name_1",
         "value": [
            [
               {
                  "name":"name_1",
                  "value":"value_1",
                  ...
               }, 
               ...              
            ], 
            ...
         ],
         ...
      },
      ...
   ]

2. **Стандартная работа**:
   - Довести до ума, работу всех rest методов.
   - Написать тесты.

3. **Саморазвертывание**:
   - Организовать приложение таким образом, что бы она могла обрабатывать любые модели без создание сериализатора(они нужны для нестандартных случаев)
   - Реализовать механизм, который позволит, сериализатору самосериализовываться и прередаваться вместе с данными как инструкция для развертывания.


## Использование

### Настройка сериализатора

```python
from data_connector.models import DataConnector

# Создание сериализатора для модели
serializer = DataConnector.objects.create(
    name='MyModelSerializer',
    content_type=ContentType.objects.get_for_model(MyModel)
)
```

### Настройка прав доступа

```python
# Настройка прав для конкретного сериализатора
serializer.can_view = True
serializer.can_edit = True
serializer.can_delete = False
serializer.can_create = True
serializer.save()
```

### Использование API

```python
# GET запрос
response = requests.get('/super-api/app_label__model_name/')

# POST запрос
data = {
    'field1': 'value1',
    'field2': 'value2'
}
response = requests.post('/super-api/app_label__model_name/', json=data)

# PATCH запрос
data = {
    'field1': 'new_value'
}
response = requests.patch('/super-api/app_label__model_name/1/', json=data)
```

## Требования

- Django 3.2+
- Python 3.8+
- Django REST framework

## Установка

1. Добавьте приложение в `INSTALLED_APPS`:

```python
INSTALLED_APPS = [
    ...
    'data_connector',
]
```

2. Выполните миграции:

```bash
python manage.py migrate data_connector
```

3. Настройте URL-маршруты:

```python
urlpatterns = [
    ...
    path('api/', include('data_connector.urls')),
]
```


