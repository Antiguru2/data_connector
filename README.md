# Data Connector

## Общее описание
Data Connector - это Django-приложение, предоставляющее универсальный API интерфейс для работы с любыми моделями Django. Приложение позволяет получать и обрабатывать данные в двух форматах: как словарь (dict) и как список полей формы (list).

## Основные возможности
1. **Универсальный API Endpoint**
   - Доступ к любой модели через `/data_connector/super_api/<natural_key>/id/`
   - Поддержка всех HTTP методов (GET, POST, PUT, PATCH, DELETE)
   - Гибкая система фильтрации данных

2. **Форматы данных**
   - **Dict формат** (DRF-подобный)
     ```python
     {
         "field_name": "value",
         "nested_field": {
             "sub_field": "value"
         }
     }
     ```
   - **List формат** (Форма)
     ```python
     [
         {
             "name": "field_name",
             "value": "field_value",
             "verbose_name": "Человекочитаемое имя"
         },
         {
             "name": "nested_field",
             "value": [
                 {
                     "name": "sub_field",
                     "value": "value"
                 }
             ]
         }
     ]
     ```

3. **Комбинирование форматов**
   - Возможность преобразования между форматами
   - Гибкая настройка правил преобразования
   - Поддержка вложенных структур данных

## Требования
- Django 3.2+
- Python 3.8+
- DRF (Django REST Framework)
- Поддержка JSON полей в базе данных

## Детальный план реализации

### 1. Базовая структура API (1 неделя)
- [x] Создание базового класса `SuperApiView`
- [x] Реализация endpoint `/data_connector/super_api/<natural_key>/id/`
- [ ] Настройка маршрутизации в `urls.py`
- [ ] Реализация базовой аутентификации и авторизации

### 2. Обработка Dict формата (2 недели)
- [ ] Создание сериализатора для Dict формата
- [ ] Реализация преобразования Django моделей в Dict
- [ ] Обработка вложенных структур
- [ ] Валидация входящих данных
- [ ] Тестирование CRUD операций

### 3. Обработка List формата (2 недели)
- [ ] Создание сериализатора для List формата
- [ ] Реализация преобразования Django моделей в List
- [ ] Обработка вложенных структур
- [ ] Валидация входящих данных
- [ ] Тестирование CRUD операций

### 4. Комбинирование форматов (1 неделя)
- [ ] Создание конвертеров между форматами
- [ ] Реализация правил преобразования
- [ ] Тестирование конвертации

### 5. Оптимизация и улучшения (2 недели)
- [ ] Кэширование результатов
- [ ] Оптимизация запросов к БД
- [ ] Добавление пагинации
- [ ] Улучшение обработки ошибок
- [ ] Расширение документации

### 6. Тестирование и отладка (1 неделя)
- [ ] Написание unit-тестов
- [ ] Написание интеграционных тестов
- [ ] Тестирование производительности
- [ ] Исправление багов

## Использование
1. Подключите приложение в `INSTALLED_APPS`
2. Добавьте URL-маршруты в `urls.py`
3. Настройте аутентификацию и права доступа
4. Используйте API endpoint для работы с моделями

## Безопасность
- Все API endpoints требуют аутентификации
- Настраиваемые права доступа для каждой операции
- Валидация входящих данных
- Защита от CSRF атак

## Архитектура
![карта моделей](project_models.png)

Изменения
добавлен файл local_router
он для подключения рест поутеров